require 'uri'
require 'net/http'
require 'mongo'

# prod_db = Mongo::MongoClient.from_uri("mongodb://Homage:homageIt12@troup.mongohq.com:10057/Homage_Prod").db
# prod_users = prod_db.collection("Users")
# prod_remakes = prod_db.collection("Remakes")

# test_db = Mongo::MongoClient.from_uri("mongodb://Homage:homageIt12@paulo.mongohq.com:10008/Homage").db
# test_users = test_db.collection("Users")
# test_remakes = test_db.collection("Remakes")


test_db = Mongo::Client.new(['paulo.mongohq.com:10008'], :database => 'Homage', :user => 'Homage', :password => 'homageIt12', :connect => :direct)
test_users = test_db["Users"]
test_remakes = test_db["Remakes"]

prod_db = Mongo::Client.new(['troup.mongohq.com:10057'], :database => 'Homage_Prod', :user => 'Homage', :password => 'homageIt12', :connect => :direct)
prod_users = prod_db["Users"]
prod_remakes = prod_db["Remakes"]

Mongo::Logger.logger.level = Logger::WARN



prod_render = URI.parse("http://homage-server-app-prod.elasticbeanstalk.com/render")
test_render = URI.parse("http://homage-server-app-dev.elasticbeanstalk.com/render")

render_remakes = [
"56220d9f474d58422d000001",
"5622f6aa09719c02f4000002",
"5623afdc09719c6ddb000001",
"5623afdc09719c6ddb000001",
"5623b31809719c6ff7000001",
"5623b31809719c6ff7000001",
"5623ee57474d584432000003",
"5623ee57474d584432000003",
"5623ee93474d584432000004",
"5623ee93474d584432000004",
"5623efcc09719c0446000008",
"5623efcc09719c0446000008",
"5623f43c474d584728000001",
"5623f43c474d584728000001",
"5623f62209719c13b6000003",
"56242609474d5853f9000003",
"56242609474d5853f9000003",
"562426d9474d5853f9000005",
"562426d9474d5853f9000005",
"56242a1609719c2c17000001",
"56242a1609719c2c17000001",
"56242d43474d5853f9000007",
"56242d43474d5853f9000007",
"5624300709719c2c17000004",
"5624300709719c2c17000004",
"56245a04474d587bc9000004",
"56245aac474d587bc9000006",
"56247598474d587e62000001",
"56247598474d587e62000001",
"562479e1474d587e62000002",
"562479e1474d587e62000002",
"56247dea474d587e62000004",
"56247dea474d587e62000004",
"56220eb2474d58422d000003",
"56225516474d586506000002",
"5622c8fd09719c71f8000001",
"5622c8fd09719c71f8000001",
"562349ee09719c2c32000004",
"562349ee09719c2c32000004",
"5623556e474d587004000001",
"5623ada7474d580dc6000002",
"5623ada7474d580dc6000002",
"5623ae55474d58244d000001",
"5623ae55474d58244d000001",
"5623aecf09719c5026000002",
"5623aecf09719c5026000002",
"5623d5f109719c0446000001",
"5623eb04474d5842b4000001",
"5623eb04474d5842b4000001",
"5623ebe0474d584432000001",
"5623ebe0474d584432000001",
"5623ed2909719c0446000004",
"5623ed2909719c0446000004",
"5623ecc2474d584432000002",
"5623ecc2474d584432000002",
"5623ee6209719c0446000005",
"5623ee6209719c0446000005",
"5623ef0c09719c0446000006",
"5623ef0c09719c0446000006",
"5623ef5509719c0446000007",
"5623ef5509719c0446000007",
"5623f4bb09719c13b6000002",
"5623f4bb09719c13b6000002",
"5623f4e7474d584728000002",
"5623f4e7474d584728000002",
"5623f9ec474d584728000003",
"5623f9ec474d584728000003",
"5624082309719c13b6000005",
"5624082309719c13b6000005",
"56242697474d5853f9000004",
"56242697474d5853f9000004",
"56242c86474d5853f9000006",
"56242c86474d5853f9000006",
"56243c78474d5853f9000008",
"56243c78474d5853f9000008",
"56243e1209719c2c17000006",
"56243e1209719c2c17000006",
"56244013474d587011000001",
"56244013474d587011000001",
"56244316474d587011000002",
"56244316474d587011000002",
"562456e9474d587bc9000002",
"5624a2f109719c5f99000006",
"5624a2f109719c5f99000006"
]


for remake_id in render_remakes do
	#remake = prod_remakes.find_one(BSON::ObjectId.from_string(remake_id))
	remake = prod_remakes.find({_id:BSON::ObjectId.from_string(remake_id)}).each.next
	puts "remake: " + remake["_id"].to_s + "; status = " + remake["status"].to_s

	# response = Net::HTTP.post_form(prod_render, {"remake_id" => remake_id.to_s})
	# puts response
end
